{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Yoav\\\\Desktop\\\\supermarket\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ModalContentComponent = class ModalContentComponent {\n  constructor(cartService, productsService, paymentModalService, userManagementService) {\n    var _this = this;\n\n    this.cartService = cartService;\n    this.productsService = productsService;\n    this.paymentModalService = paymentModalService;\n    this.userManagementService = userManagementService;\n    this.input = '';\n    this.city = '';\n    this.street = '';\n    this.houseNumber = '';\n    this.contactInfo = '';\n    this.oldCartId = '';\n    this.creditCardNumber = '';\n    this.expirationDate = 'mm/yy';\n    this.cvv = '';\n\n    this.highlightSearch = () => {\n      for (let index = 0; index < this.cartService.items.length; index++) {\n        const item = document.getElementById(this.cartService.items[index]._id);\n        item.children[0].children[1].innerHTML.toLowerCase().includes(this.input.toLowerCase()) ? item.classList.add(\"highlight\") : item.classList.remove(\"highlight\");\n\n        if (this.input == '') {\n          item.classList.remove(\"highlight\");\n        }\n      }\n    };\n\n    this.autoFillData = key => {\n      switch (key) {\n        case 'city':\n          this.city = this.userManagementService.userData[key];\n          break;\n\n        case 'street':\n          this.street = this.userManagementService.userData[key];\n          break;\n\n        case 'houseNumber':\n          this.houseNumber = this.userManagementService.userData[key];\n          break;\n      }\n    };\n\n    this.continuePayment = () => {\n      this.cartService.modalStage++;\n    };\n\n    this.finishPayment = /*#__PURE__*/_asyncToGenerator(function* () {\n      const orderDetails = {\n        city: _this.city,\n        street: _this.street,\n        houseNumber: _this.houseNumber,\n        shippingDate: _this.shippingDate,\n        contactInfo: _this.contactInfo\n      };\n\n      _this.cartService.closeCart(orderDetails);\n    });\n\n    this.goBack = () => this.cartService.modalStage--;\n\n    this.formatDate = () => {\n      let today = new Date();\n      let yyyy = today.getFullYear();\n      let mm = today.getMonth() + 1; // Months start at 0!\n\n      let dd = today.getDate();\n      if (dd < 10) dd = '0' + dd;\n      if (mm < 10) mm = '0' + mm;\n      today = yyyy + '-' + mm + '-' + dd;\n      return today;\n    };\n  }\n\n  ngOnInit() {\n    this.currentDate = this.formatDate();\n    this.city = '';\n    this.street = '';\n    this.houseNumber = '';\n    this.shippingDate = this.currentDate;\n    this.contactInfo = '';\n    this.oldCartId = this.cartService.cartData._id;\n  }\n\n};\nModalContentComponent = __decorate([Component({\n  selector: 'app-modal-content',\n  templateUrl: './modal-content.component.html',\n  styleUrls: ['./modal-content.component.css']\n})], ModalContentComponent);\nexport { ModalContentComponent };","map":{"version":3,"sources":["C:/Users/Yoav/Desktop/supermarket/client/src/app/components/main/modal-content/modal-content.component.ts"],"names":["__decorate","Component","ModalContentComponent","constructor","cartService","productsService","paymentModalService","userManagementService","input","city","street","houseNumber","contactInfo","oldCartId","creditCardNumber","expirationDate","cvv","highlightSearch","index","items","length","item","document","getElementById","_id","children","innerHTML","toLowerCase","includes","classList","add","remove","autoFillData","key","userData","continuePayment","modalStage","finishPayment","orderDetails","shippingDate","closeCart","goBack","formatDate","today","Date","yyyy","getFullYear","mm","getMonth","dd","getDate","ngOnInit","currentDate","cartData","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nlet ModalContentComponent = class ModalContentComponent {\r\n    constructor(cartService, productsService, paymentModalService, userManagementService) {\r\n        this.cartService = cartService;\r\n        this.productsService = productsService;\r\n        this.paymentModalService = paymentModalService;\r\n        this.userManagementService = userManagementService;\r\n        this.input = '';\r\n        this.city = '';\r\n        this.street = '';\r\n        this.houseNumber = '';\r\n        this.contactInfo = '';\r\n        this.oldCartId = '';\r\n        this.creditCardNumber = '';\r\n        this.expirationDate = 'mm/yy';\r\n        this.cvv = '';\r\n        this.highlightSearch = () => {\r\n            for (let index = 0; index < this.cartService.items.length; index++) {\r\n                const item = document.getElementById(this.cartService.items[index]._id);\r\n                (item.children[0].children[1].innerHTML.toLowerCase().includes(this.input.toLowerCase())) ?\r\n                    item.classList.add(\"highlight\") :\r\n                    item.classList.remove(\"highlight\");\r\n                if (this.input == '') {\r\n                    item.classList.remove(\"highlight\");\r\n                }\r\n            }\r\n        };\r\n        this.autoFillData = (key) => {\r\n            switch (key) {\r\n                case 'city':\r\n                    this.city = this.userManagementService.userData[key];\r\n                    break;\r\n                case 'street':\r\n                    this.street = this.userManagementService.userData[key];\r\n                    break;\r\n                case 'houseNumber':\r\n                    this.houseNumber = this.userManagementService.userData[key];\r\n                    break;\r\n            }\r\n        };\r\n        this.continuePayment = () => {\r\n            this.cartService.modalStage++;\r\n        };\r\n        this.finishPayment = async () => {\r\n            const orderDetails = {\r\n                city: this.city,\r\n                street: this.street,\r\n                houseNumber: this.houseNumber,\r\n                shippingDate: this.shippingDate,\r\n                contactInfo: this.contactInfo,\r\n            };\r\n            this.cartService.closeCart(orderDetails);\r\n        };\r\n        this.goBack = () => this.cartService.modalStage--;\r\n        this.formatDate = () => {\r\n            let today = new Date();\r\n            let yyyy = today.getFullYear();\r\n            let mm = today.getMonth() + 1; // Months start at 0!\r\n            let dd = today.getDate();\r\n            if (dd < 10)\r\n                dd = '0' + dd;\r\n            if (mm < 10)\r\n                mm = '0' + mm;\r\n            today = yyyy + '-' + mm + '-' + dd;\r\n            return today;\r\n        };\r\n    }\r\n    ngOnInit() {\r\n        this.currentDate = this.formatDate();\r\n        this.city = '';\r\n        this.street = '';\r\n        this.houseNumber = '';\r\n        this.shippingDate = this.currentDate;\r\n        this.contactInfo = '';\r\n        this.oldCartId = this.cartService.cartData._id;\r\n    }\r\n};\r\nModalContentComponent = __decorate([\r\n    Component({\r\n        selector: 'app-modal-content',\r\n        templateUrl: './modal-content.component.html',\r\n        styleUrls: ['./modal-content.component.css']\r\n    })\r\n], ModalContentComponent);\r\nexport { ModalContentComponent };\r\n"]},"metadata":{},"sourceType":"module"}